---
title: "Identificación de patrones en datos de aceleración obtenidos mediante el celular"
subtitle: "Análisis de patrones de movimiento"
author: 
  - name: Sofía Duque Rendón 
  - name: Melany Franco Marin 
  - name: Juan David Trejos
  - name: Miguel Ángel Vargas Valencia
date: last-modified
date-format: full
lang: es
format: 
  pdf:
    toc: true
editor: source
execute: 
  echo: false
  warning: false
---

```{r}
rm(list = ls())
```

```{r}
library(tidyverse)
library(gridExtra)
library(patchwork)
library(cowplot)
```

# Introducción

# Descripción y recolección de los datos

```{r}
datosSofia <- read.csv("sensores/GrabacionSofia.csv")
datosMelany <- read.csv("sensores/GrabacionMelany.csv")
datosJuan <- read.csv("sensores/GrabacionJuanDavid.csv")
datosMiguel <- read.csv("sensores/GrabacionMiguel.csv")

```

Los datos fueron recolectados utilizando la aplicación *Arduino Science Journal*, que emplea los sensores del teléfono móvil para registrar las aceleraciones en los ejes X, Y y Z. Para este análisis se realizaron cuatro mediciones, de las cuales dos se llevaron a cabo mientras se ejecutaban las mismas actividades.

## timestamp

Marca temporal que indica el momento exacto en que fue tomada cada medición. Se encuentra en formato de milisegundos desde la época UNIX (1 de enero de 1970).

## AccX

Aceleración medida en el eje **X** del dispositivo móvil. Representa la fuerza de aceleración detectada en la dirección horizontal (izquierda-derecha) y se mide en metros por segundo al cuadrado (m/s²).

## AccY

Aceleración medida en el eje **Y** del dispositivo móvil. Representa la fuerza de aceleración en la dirección vertical (arriba-abajo), también en unidades de m/s².

## AccZ

Aceleración medida en el eje **Z** del dispositivo móvil. Corresponde a la aceleración perpendicular a la pantalla del dispositivo (profundidad), medida igualmente en m/s².

```{r}
datosSofia <- datosSofia |> 
  mutate(fecha = as.POSIXct(timestamp/1000),
         AccT = sqrt(AccX^2 + AccY^2 + AccZ^2))

datosMelany <- datosMelany |> 
  mutate(fecha = as.POSIXct(timestamp/1000),
         AccT = sqrt(AccX^2 + AccY^2 + AccZ^2))

datosJuan <- datosJuan |> 
  mutate(fecha = as.POSIXct(timestamp/1000),
         AccT = sqrt(AccX^2 + AccY^2 + AccZ^2))

datosMiguel <- datosMiguel |> 
  mutate(fecha = as.POSIXct(timestamp/1000),
         AccT = sqrt(AccX^2 + AccY^2 + AccZ^2))
```

\newpage

## Gráficas exploratorias

### Gráfica sencilla con la aceleración en X

```{r}
ggplot(datosMiguel, aes(fecha, AccX)) +
  geom_line()
```

```{r}
gx <- ggplot(datosMiguel, aes(fecha, AccX)) +
  geom_line()
gy <- ggplot(datosMiguel, aes(fecha, AccX)) +
  geom_line()
gz <- ggplot(datosMiguel, aes(fecha, AccX)) +
  geom_line()
```

\newpage

### Gráficas exploratorias conjuntas de X, Y y Z con diferentes paquetes de R

#### Gráfica conjunta con el paquete "patchwork"

```{r}
#| fig-height: 7
(gx / gy / gz)
```

\newpage

#### Gráfica conjunta con el paquete "gridExtra"

```{r}
#| fig-height: 7
gridExtra::grid.arrange(gx, gx, gx)
```

\newpage

#### Gráfica conjunta con el paquete "cowplot"

```{r}
#| fig-height: 7
plot_grid(gx, gy, gz, ncol = 1, labels = "AUTO")
```

\newpage

### Gráfica de la aceleración total.

$$
AccT = \sqrt{AccX^2 + AccY^2 + AccZ^2}
$$

```{r}
ggplot(datosMiguel, aes(fecha, AccT)) +
  geom_line()
```

\newpage

### Gráfica con una sección de la aceleración total.

```{r}
datosMiguelP <- datosMiguel |> 
  filter(fecha > as.POSIXct("2025-05-06 09:20:00") &
         fecha < as.POSIXct("2025-05-06 09:20:10"))
```

```{r}
ggplot(datosMiguelP, aes(fecha, AccT)) +
  geom_line()
```

```{r}
ggplot(datosMiguelP |> na.omit(), aes(fecha, AccT)) +
  geom_line()
```

\newpage

## Resumen de todos los datos de aceleración

```{r}
summary(datosMiguel)
```
